<div>

  <div class="col s12 m12 l6">
    <div class="row">
      <div class="col s12 m12 l12">
        <h3>{{ ctrl.model.vehicle.name }}</h3>

        <i class="material-icons tiny">query_builder</i> request time: {{ ctrl.model.requestTimeFromNow }}
        <small>({{ ctrl.model.requestTime }})</small>
        <br/>
        <i class="material-icons tiny">router</i> data provider: {{ ctrl.model.vehicle.provider }}
        <br/>
        <br/>

        <i class="material-icons tiny">room</i> lat/lng: {{ctrl.model.vehicle.location.lat}} / {{
        ctrl.model.vehicle.location.lng }}
        <br/>

        <i class="material-icons tiny">query_builder</i> position time: {{ ctrl.model.positionTimeFromNow }}
        <small>({{ ctrl.model.positionTime }})</small>
        <br/>

        <i class="material-icons tiny">av_timer</i> speed: {{ (ctrl.model.vehicle.data.speed || 0) }} km/h

      </div>
    </div>

  </div>

  <div class="col s12 m12 l6" style="padding: 9px;">
    <leaflet id="mymap"
             defaults="ctrl.map.defaults"
             center="ctrl.map.center"
             markers="ctrl.map.markers"
             tiles="ctrl.map.tiles"
             height="250px">
    </leaflet>
  </div>

  <div class="col s12 m12 l12">
    <h5>STATE params</h5>

    <div class="card-panel amber lighten-5" data-ng-if="ctrl.model.vehicle.data.states.length <= 0">
      No states params present.
    </div>
    <table data-ng-if="ctrl.model.vehicle.data.states.length > 0">
      <thead>
      <tr>
        <th>param</th>
        <th>value</th>
      </tr>
      </thead>

      <tbody>
      <tr data-ng-repeat="state in ctrl.model.vehicle.data.states">
        <td>
          <span data-materialize-tooltipped data-delay="50"
                data-tooltip="{{ ctrl.stateParamsMap[state.code].description || 'No info.' }}">
            {{ state.param }}
          </span>
        </td>
        <td>
          <span>{{ state.value }}</span>
        </td>
      </tr>
      </tbody>
    </table>

  </div>

  <div class="col s12 m12 l12">
    <h5>XFCD params</h5>

    <div class="card-panel amber lighten-5" data-ng-if="ctrl.model.vehicle.data.xfcds.length <= 0">
      No xfcd params present.
    </div>
    <table data-ng-if="ctrl.model.vehicle.data.xfcds.length > 0">
      <thead>
      <tr>
        <th>param</th>
        <th>value</th>
      </tr>
      </thead>

      <tbody>
      <tr data-ng-repeat="xfcd in ctrl.model.vehicle.data.xfcds">
        <td>
          <span>
            {{ xfcd.param }}
          </span>
        </td>
        <td>
          <span>{{ xfcd.value }}</span>
        </td>
      </tr>
      </tbody>
    </table>

  </div>

  
  <div class="col s12 m12 l12">
      <h5>Reservations</h5>
        
      <div class="card-panel amber lighten-5" data-ng-if="ctrl.model.vehicle.reservations.length <= 0">
        No reservations present.
      </div>
  
      <a class="btn disabled">Create new reservation</a>
  
      <table data-ng-if="ctrl.model.vehicle.reservations.length > 0">
        <thead>
        <tr>
          <th>#</th>
          <th>type</th>
          <th>from</th>
          <th>until</th>
          <th>data</th>
          <th>actions</th>
        </tr>
        </thead>
  
        <tbody>
        <tr data-ng-repeat="reservation in ctrl.model.vehicle.reservations">
          <td>
            <span>
              {{ reservation.reservationId }}
            </span>
          </td>
          <td>
            <span data-ng-if="!!reservation.rfid" class="new badge blue">RFID</span>
            <span data-ng-if="!!reservation.btle" class="new badge">BTLE</span>
          </td>
          <td>
            {{ reservation.from }}
          </td>
          <td>
            {{ reservation.until }}
          </td>
          <td>
            <div data-ng-if="!!reservation.rfid">
              <ul>
                <li><b>driverTagId</b>: {{ reservation.rfid.driverTagId }}</li>
              </ul>
            </div>
            <div data-ng-if="!!reservation.btle">
              <ul>
                <li><b>accessCertificateId</b>: {{ reservation.btle.accessCertificateId }}</li>
                <li><b>appId</b>: {{ reservation.btle.appId }}</li>
                <li><b>mobileSerialNumber</b>: {{ reservation.btle.mobileSerialNumber }}</li>
              </ul>
            </div>
          </td>
          <td>
              <a class="btn waves-effect waves-light red disabled">delete</a>
          </td>
        </tr>
        </tbody>
      </table>
    </div>
  
</div>

</div>
